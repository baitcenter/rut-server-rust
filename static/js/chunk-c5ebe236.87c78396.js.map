{"version":3,"sources":["webpack:///./src/util/constant.js","webpack:///./src/components/User/UpdateUser.vue?05d2","webpack:///src/components/User/UpdateUser.vue","webpack:///./src/components/User/UpdateUser.vue?f1ef","webpack:///./src/components/User/UpdateUser.vue","webpack:///./src/components/User/UpdateUser.vue?c86b"],"names":["__webpack_require__","d","__webpack_exports__","regUrl","regUiid","render","_vm","this","_h","$createElement","_c","_self","attrs","size","on","click","$event","show","_v","_s","staticClass","ref","label","counter","rules","nameRule","model","value","callback","$$v","nickname","expression","lenRule","rows","auto-grow","avatar","location","intro","type","onUpdate","_e","pswRule","oldpsw","psw","repswRule","repsw","onChangePsw","staticRenderFns","UpdateUservue_type_script_lang_js_","name","title","data","_this","uname","email","v","length","emailRule","test","methods","_this2","currID","$store","getters","actID","$refs","form","validate","Object","auth","trim","api","then","resp","user","$router","push","concat","$message","loadUser","_this3","pathid","$route","params","id","_this4","old_psw","new_psw","status","message","console","log","created","User_UpdateUservue_type_script_lang_js_","component","componentNormalizer","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UpdateUser_vue_vue_type_style_index_0_id_dba58704_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_UpdateUser_vue_vue_type_style_index_0_id_dba58704_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-c5ebe236.87c78396.js","sourcesContent":["// store some constants\n\n// re\nexport const regUrl = /^(https?):\\/\\/([^/:]+)(:[0-9]+)?(\\/.*)?$/\nexport const regPsw = /^(?=.*[a-zA-Z])(?=.*\\d)(?=.*[#@!~%^$&*-])[a-zA-Z\\d#@!~%^$&*-]{8,18}$/\nexport const regEmail = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/\nexport const regName = /^[\\w-]{3,16}$/\nexport const regTag = /[\\n|\\r|\\s]#(\\w+)/g  // /(?<=[\\n|\\r|\\s])#(\\w+)/g N/A SAFARI, FIREFOX\nexport const regUiid = /[-_ ]/gi\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.show=!_vm.show}}},[_vm._v(\"\\n    \"+_vm._s(_vm.show ? 'Change Password': 'Update Profile')+\"\\n  \")]),(_vm.show)?_c('div',{staticClass:\"update-page\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"Update My Profile\")]),_c('v-form',{ref:\"form\",staticClass:\"update-form\"},[_c('v-text-field',{attrs:{\"label\":\"Nickname\",\"counter\":16,\"rules\":_vm.nameRule},model:{value:(_vm.nickname),callback:function ($$v) {_vm.nickname=$$v},expression:\"nickname\"}}),_c('v-textarea',{attrs:{\"label\":\"Avatar\",\"counter\":144,\"rules\":_vm.lenRule,\"rows\":1,\"auto-grow\":\"\"},model:{value:(_vm.avatar),callback:function ($$v) {_vm.avatar=$$v},expression:\"avatar\"}}),_c('v-text-field',{attrs:{\"label\":\"Location\",\"rules\":_vm.lenRule},model:{value:(_vm.location),callback:function ($$v) {_vm.location=$$v},expression:\"location\"}}),_c('v-textarea',{attrs:{\"label\":\"Intro\",\"counter\":\"\",\"rows\":6,\"auto-grow\":\"\"},model:{value:(_vm.intro),callback:function ($$v) {_vm.intro=$$v},expression:\"intro\"}})],1),_c('el-button',{staticClass:\"blockbtn\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.onUpdate}},[_vm._v(\"Update My Profile\\n    \")])],1):_vm._e(),(!_vm.show)?_c('div',{staticClass:\"update-page\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"Change My Password\")]),_c('v-form',{ref:\"form\",staticClass:\"psw-form\"},[_c('v-text-field',{attrs:{\"label\":\"Old Password\",\"type\":'password',\"rules\":_vm.pswRule},model:{value:(_vm.oldpsw),callback:function ($$v) {_vm.oldpsw=$$v},expression:\"oldpsw\"}}),_c('v-text-field',{attrs:{\"label\":\"New Password\",\"type\":'password',\"rules\":_vm.pswRule},model:{value:(_vm.psw),callback:function ($$v) {_vm.psw=$$v},expression:\"psw\"}}),_c('v-text-field',{attrs:{\"label\":\"Confirm Password\",\"type\":'password',\"rules\":_vm.repswRule},model:{value:(_vm.repsw),callback:function ($$v) {_vm.repsw=$$v},expression:\"repsw\"}})],1),_c('el-button',{staticClass:\"blockbtn\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.onChangePsw}},[_vm._v(\"Change Password\\n    \")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <el-button size=\"mini\" @click=\"show=!show\">\n    {{ show ? 'Change Password': 'Update Profile' }}\n  </el-button>\n  <div class=\"update-page\" v-if=\"show\">\n    <h3 class=\"title\">Update My Profile</h3>\n    <v-form ref=\"form\" class=\"update-form\">\n      <v-text-field\n        v-model=\"nickname\"\n        label=\"Nickname\"\n        :counter= \"16\"\n        :rules=\"nameRule\"\n      ></v-text-field>\n      <v-textarea\n        v-model=\"avatar\"\n        label=\"Avatar\"\n        :counter = \"144\"\n        :rules=\"lenRule\"\n        :rows= \"1\"\n        auto-grow\n      ></v-textarea>\n      <!-- <v-text-field\n        v-model=\"email\"\n        label=\"Email\"\n        :counter= \"144\"\n        :rules=\"lenRule\"\n      ></v-text-field> -->\n      <v-text-field\n        v-model=\"location\"\n        label=\"Location\"\n        :rules=\"lenRule\"\n      ></v-text-field>\n      <v-textarea\n        v-model=\"intro\"\n        label=\"Intro\"\n        counter\n        :rows= \"6\"\n        auto-grow\n      ></v-textarea>\n    </v-form>\n    <el-button class=\"blockbtn\" type=\"primary\" size=\"small\"\n              @click=\"onUpdate\">Update My Profile\n    </el-button>\n  </div>\n  <div class=\"update-page\" v-if=\"!show\">\n    <h3 class=\"title\">Change My Password</h3>\n    <v-form ref=\"form\" class=\"psw-form\">\n      <v-text-field\n        v-model=\"oldpsw\"\n        label=\"Old Password\"\n        :type=\"'password'\"\n        :rules=\"pswRule\"\n      ></v-text-field>\n      <v-text-field\n        v-model=\"psw\"\n        label=\"New Password\"\n        :type=\"'password'\"\n        :rules=\"pswRule\"\n      ></v-text-field>\n      <v-text-field\n        v-model=\"repsw\"\n        label=\"Confirm Password\"\n        :type=\"'password'\"\n        :rules=\"repswRule\"\n      ></v-text-field>\n    </v-form>\n    <el-button class=\"blockbtn\" type=\"primary\" size=\"small\"\n               @click=\"onChangePsw\">Change Password\n    </el-button>\n  </div>\n</div>\n</template>\n\n<script>\nimport { updateUser, fetchUser, changePsw } from '../../api'\nimport { regName, regEmail, regPsw } from '../../util/constant'\nimport { checkAuth } from '../../util/auth'\n\nexport default {\n  name: 'update-profile',\n  title: 'Update My Profile',\n  data () {\n    return {\n      uname: '',\n      avatar: '',\n      email: '',\n      location: '',\n      intro: '',\n      nickname: '',\n      nameRule: [\n        v => v.length <= 16 || 'Must be less than 16 characters'\n      ],\n      lenRule: [\n        v => v.length <= 144 || 'Must be less than 144 characters'\n      ],\n      emailRule: [\n        v => /.+@.+/.test(v) || 'E-mail must be valid'\n      ],\n      show: true,\n      oldpsw: '',\n      psw: '',\n      pswRule: [\n        v => !!v || 'required',\n        v => v.length >= 8 || 'Must be more than 8 characters'\n      ],\n      repsw: '',\n      repswRule: [\n        v => (!!v && v) === this.psw || 'Not Match'\n      ]\n    }\n  },\n  methods: {\n    onUpdate() {\n      let currID = this.$store.getters.actID\n      if (!this.$refs.form.validate() || !checkAuth() || this.uname !== currID) {\n        this.$message(\"Invalid Input or Need to Log in\")\n        return\n      }\n      let data = {\n        uname: this.uname.trim(),\n        avatar: this.avatar.trim(),\n        email: this.email.trim(),\n        intro: this.intro.trim(),\n        location: this.location.trim(),\n        nickname: this.nickname.trim() || this.uname,\n      }\n      updateUser(this.uname, data).then(resp => {\n        let name = resp.data.user.uname\n        this.$router.push(`/p/${name}`)  // relaod??\n      })\n    },\n    loadUser () {\n      let pathid = this.$route.params.id\n      fetchUser(pathid).then(resp => {\n        let data = resp.data.user\n        this.uname = data.uname\n        this.avatar = data.avatar\n        this.email = data.email\n        this.intro = data.intro\n        this.location = data.location\n        this.nickname = data.nickname\n      })\n    },\n    onChangePsw() {\n      let currID = this.$store.getters.actID\n      if (!this.$refs.form.validate() || !checkAuth() || this.uname !== currID) {\n        console.log(\"Invalid\")\n        return\n      }\n      let data = {\n        old_psw: this.oldpsw.trim(),\n        new_psw: this.psw.trim(),\n        uname: this.uname\n      }\n      changePsw(this.uname, data).then(resp => {\n        // console.log(resp.data)\n        if (resp.data.status == 200) {\n          this.$router.push('/login')\n        } else {\n          this.$message(resp.data.message)\n        }\n      })\n    },\n  },\n  created () {\n    this.loadUser()\n  }\n}\n</script>\n\n<style scoped>\n.update-page {\n  padding: 10px 210px 10px 210px;\n  position: relative;\n} \n.update-form {\n  padding: 20px;\n  border: 1px dotted #689f38;\n}\n.title {\n  text-align: center;\n  margin-bottom: 20px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UpdateUser.vue?vue&type=template&id=dba58704&scoped=true&\"\nimport script from \"./UpdateUser.vue?vue&type=script&lang=js&\"\nexport * from \"./UpdateUser.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UpdateUser.vue?vue&type=style&index=0&id=dba58704&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dba58704\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateUser.vue?vue&type=style&index=0&id=dba58704&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateUser.vue?vue&type=style&index=0&id=dba58704&scoped=true&lang=css&\""],"sourceRoot":""}